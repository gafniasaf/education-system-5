FAIL tests/unit/ui/NotificationsDropdownClient.spec.tsx
  ‚óè Load more appends items

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 20

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"notif-list"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between mb-2"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"font-medium"[39m
              [36m>[39m
                [0mNotifications[0m
              [36m</span>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Mark all notifications as read"[39m
                [33mclass[39m=[32m"underline text-xs"[39m
                [33mdata-testid[39m=[32m"notif-mark-all"[39m
                [33mtitle[39m=[32m"Mark all read"[39m
              [36m>[39m
                [0mMark all[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<ul[39m
              [33mclass[39m=[32m"space-y-2"[39m
            [36m>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m""[39m
                [36m>[39m
                  [36m<span>[39m
                    [0msubmission:graded[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"ml-2"[39m
                  [36m>[39m
                    [0mScore: [0m
                    [0m80[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Mark notification no-0000 as read"[39m
                  [33mclass[39m=[32m"underline text-xs"[39m
                  [33mdata-testid[39m=[32m"notif-read-btn"[39m
                [36m>[39m
                  [0mRead[0m
                [36m</button>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mmessage:new[0m
                  [36m</span>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"ml-2 underline"[39m
                    [33mhref[39m=[32m"/labs/system/inbox?thread=th-1"[39m
                  [36m>[39m
                    [0mOpen thread[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mannouncement:published[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0msubmission:graded[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"ml-2"[39m
                  [36m>[39m
                    [0mScore: [0m
                    [0m83[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mmessage:new[0m
                  [36m</span>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"ml-2 underline"[39m
                    [33mhref[39m=[32m"/labs/system/inbox?thread=th-4"[39m
                  [36m>[39m
                    [0mOpen thread[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m""[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mannouncement:published[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Mark notification no-0005 as read"[39m
                  [33mclass[39m=[32m"underline text-xs"[39m
                  [33mdata-testid[39m=[32m"notif-read-btn"[39m
                [36m>[39m
                  [0mRead[0m
                [36m</button>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0msubmission:graded[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"ml-2"[39m
                  [36m>[39m
                    [0mScore: [0m
                    [0m86[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mmessage:new[0m
                  [36m</span>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"ml-2 underline"[39m
                    [33mhref[39m=[32m"/labs/system/inbox?thread=th-7"[39m
                  [36m>[39m
                    [0mOpen thread[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mannouncement:published[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0msubmission:graded[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"ml-2"[39m
                  [36m>[39m
                    [0mScore: [0m
                    [0m89[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m""[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mmessage:new[0m
                  [36m</span>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"ml-2 underline"[39m
                    [33mhref[39m=[32m"/labs/system/inbox?thread=th-10"[39m
                  [36m>[39m
                    [0mOpen thread[0m
                  [36m</a>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Mark notification no-0010 as read"[39m
                  [33mclass[39m=[32m"underline text-xs"[39m
                  [33mdata-testid[39m=[32m"notif-read-btn"[39m
                [36m>[39m
                  [0mRead[0m
                [36m</button>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mannouncement:published[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0msubmission:graded[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"ml-2"[39m
                  [36m>[39m
                    [0mScore: [0m
                    [0m92[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mmessage:new[0m
                  [36m</span>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"ml-2 underline"[39m
                    [33mhref[39m=[32m"/labs/system/inbox?thread=th-13"[39m
                  [36m>[39m
                    [0mOpen thread[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mannouncement:published[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m""[39m
                [36m>[39m
                  [36m<span>[39m
                    [0msubmission:graded[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"ml-2"[39m
                  [36m>[39m
                    [0mScore: [0m
                    [0m95[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Mark notification no-0015 as read"[39m
                  [33mclass[39m=[32m"underline text-xs"[39m
                  [33mdata-testid[39m=[32m"notif-read-btn"[39m
                [36m>[39m
                  [0mRead[0m
                [36m</button>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mmessage:new[0m
                  [36m</span>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"ml-2 underline"[39m
                    [33mhref[39m=[32m"/labs/system/inbox?thread=th-16"[39m
                  [36m>[39m
                    [0mOpen thread[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mannouncement:published[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0msubmission:graded[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"ml-2"[39m
                  [36m>[39m
                    [0mScore: [0m
                    [0m98[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mmessage:new[0m
                  [36m</span>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"ml-2 underline"[39m
                    [33mhref[39m=[32m"/labs/system/inbox?thread=th-19"[39m
                  [36m>[39m
                    [0mOpen thread[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</li>[39m
            [36m</ul>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 flex justify-end"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"underline text-xs"[39m
                [33mdata-testid[39m=[32m"notif-load-more"[39m
              [36m>[39m
                [0mLoad more[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

      55 |   render(<NotificationsDropdownClient initial={[]} />);
      56 |   await user.click(screen.getByTestId('notif-load-more'));
    > 57 |   await waitFor(() => expect(screen.getAllByTestId('notif-item').length).toBe(2));
         |                                                                          ^
      58 |   restore();
      59 | });
      60 |

      at unit/ui/NotificationsDropdownClient.spec.tsx:57:74
      at runWithExpensiveErrorDiagnosticsDisabled (../node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (../node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (../node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (../node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

PASS tests/unit/ui/GradeRowClient.spec.tsx
PASS tests/unit/ui/SystemThroughputProfiler.spec.tsx
PASS tests/unit/ui/TeacherAnnouncements.spec.tsx
FAIL tests/unit/ui/TeacherCourseInsightsAdvanced.spec.tsx
  ‚óè Teacher Course Insights (Advanced) ‚Ä∫ renders table and totals with jitter

    Unable to find an element by: [data-testid="insights-table"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<main[39m
          [33mclass[39m=[32m"p-6"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-xl font-semibold mb-4"[39m
          [36m>[39m
            [0mCourse Insights (Advanced)[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-500"[39m
          [36m>[39m
            [0mNo courses yet.[0m
          [36m</p>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</body>[39m

      27 |     const ui = await TeacherCourseInsightsAdvancedPage();
      28 |     render(ui);
    > 29 |     await screen.findByTestId('insights-table');
         |                  ^
      30 |     await screen.findByTestId('insights-total-courses');
      31 |     await screen.findByTestId('insights-total-lessons');
      32 |   });

      at waitForWrapper (../node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at ../node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.<anonymous> (unit/ui/TeacherCourseInsightsAdvanced.spec.tsx:29:18)

PASS tests/unit/ui/SystemDiagnosticsSuite.spec.tsx
PASS tests/unit/ui/StudentStudyDigest.spec.tsx
PASS tests/unit/ui/StudentLearningOverviewDetailed.spec.tsx
PASS tests/unit/ui/StudentLearningOverviewAdvanced.spec.tsx
PASS tests/unit/ui/ParentAnnouncementsLab.spec.tsx
PASS tests/unit/ui/StudentLearningOverview.spec.tsx
PASS tests/unit/ui/SystemPercentileTrends.spec.tsx
PASS tests/unit/ui/StudentUpcomingLessons.spec.tsx
PASS tests/unit/ui/SystemObserver.spec.tsx
PASS tests/unit/ui/TeacherCourseInsights.spec.tsx
FAIL tests/unit/ui/SystemHealthHistory.spec.tsx
  ‚óè System Health History (labs) ‚Ä∫ renders delta stats and timestamps with jitter

    ReferenceError: fetch is not defined

      72 |   }
      73 |   const started = Date.now();
    > 74 |   const res = await fetch(url, { cache: "no-store", ...init, headers: hdrs });
         |               ^
      75 |   try {
      76 |     const ms = Date.now() - started;
      77 |     // eslint-disable-next-line no-console

      at serverFetch (../apps/web/src/lib/serverFetch.ts:74:15)
      at fetchJson (../apps/web/src/lib/serverFetch.ts:88:21)
      at Object.get (../apps/web/src/lib/data/health.ts:14:23)
      at takeSamples (../apps/web/src/app/labs/system/health-history/page.tsx:11:47)
      at HealthHistoryPage (../apps/web/src/app/labs/system/health-history/page.tsx:34:25)
      at Object.<anonymous> (unit/ui/SystemHealthHistory.spec.tsx:15:39)

PASS tests/unit/ui/SystemLatencySampler.spec.tsx
FAIL tests/unit/ui/SystemUptimeTile.spec.tsx
  ‚óè System Uptime Tile (labs) ‚Ä∫ renders ok and ts fields under jitter

    Unable to find an element by: [data-testid="uptime-ok"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<main[39m
          [33mclass[39m=[32m"p-6"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-xl font-semibold"[39m
          [36m>[39m
            [0mSystem uptime[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-700"[39m
          [36m>[39m
            [0mUnable to load uptime.[0m
          [36m</p>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</body>[39m

      16 |     const ui = await UptimeTilePage();
      17 |     render(ui);
    > 18 |     await screen.findByTestId('uptime-ok');
         |                  ^
      19 |     await screen.findByTestId('uptime-ts-iso');
      20 |     await screen.findByTestId('uptime-ts-human');
      21 |   });

      at waitForWrapper (../node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at ../node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.<anonymous> (unit/ui/SystemUptimeTile.spec.tsx:18:18)

FAIL tests/unit/ui/StudentProfile.spec.tsx
  ‚óè Student Profile (labs) ‚Ä∫ renders email and role when authenticated

    Unable to find an element by: [data-testid="profile-email"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<main[39m
          [33mclass[39m=[32m"p-6 space-y-3"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-xl font-semibold"[39m
            [33mdata-testid[39m=[32m"profile-title"[39m
          [36m>[39m
            [0mStudent Profile[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-700"[39m
            [33mdata-testid[39m=[32m"signin-prompt"[39m
          [36m>[39m
            [0mYou are not signed in[0m
          [36m</p>[39m
          [36m<a[39m
            [33mclass[39m=[32m"underline"[39m
            [33mdata-testid[39m=[32m"signin-link"[39m
            [33mhref[39m=[32m"/login"[39m
          [36m>[39m
            [0mGo to login[0m
          [36m</a>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</body>[39m

      15 |     const ui = await StudentProfilePage();
      16 |     render(ui);
    > 17 |     expect(await screen.findByTestId('profile-email')).toHaveTextContent('s@example.com');
         |                         ^
      18 |     expect(await screen.findByTestId('profile-role')).toHaveTextContent('student');
      19 |   });
      20 | });

      at waitForWrapper (../node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at ../node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.<anonymous> (unit/ui/StudentProfile.spec.tsx:17:25)

PASS tests/unit/ui/StudentPlanner.spec.tsx
FAIL tests/unit/ui/AdminReports.spec.tsx
  ‚óè Admin Reports (dashboard) ‚Ä∫ renders reports tiles

    Found multiple elements with the text: Reports

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33maria-current[39m=[32m"page"[39m
      [33mclass[39m=[32m"text-gray-900"[39m
    [36m>[39m
      [0mReports[0m
    [36m</span>[39m

    Ignored nodes: comments, script, style
    [36m<h1[39m
      [33mclass[39m=[32m"text-xl font-semibold"[39m
    [36m>[39m
      [0mReports[0m
    [36m</h1>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33maria-label[39m=[32m"Reports"[39m
          [33mclass[39m=[32m"p-6 space-y-4"[39m
        [36m>[39m
          [36m<nav[39m
            [33maria-label[39m=[32m"Breadcrumb"[39m
            [33mclass[39m=[32m"text-sm"[39m
          [36m>[39m
            [36m<ol[39m
              [33mclass[39m=[32m"flex items-center gap-1 text-gray-600"[39m
            [36m>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center gap-1"[39m
              [36m>[39m
                [36m<a[39m
                  [33mclass[39m=[32m"underline"[39m
                  [33mhref[39m=[32m"/dashboard/admin"[39m
                [36m>[39m
                  [0mDashboard[0m
                [36m</a>[39m
                [36m<span[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"mx-1"[39m
                [36m>[39m
                  [0m/[0m
                [36m</span>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center gap-1"[39m
              [36m>[39m
                [36m<span[39m
                  [33maria-current[39m=[32m"page"[39m
                  [33mclass[39m=[32m"text-gray-900"[39m
                [36m>[39m
                  [0mReports[0m
                [36m</span>[39m
              [36m</li>[39m
            [36m</ol>[39m
          [36m</nav>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-xl font-semibold"[39m
          [36m>[39m
            [0mReports[0m
          [36m</h1>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-4 gap-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded p-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-sm text-gray-600"[39m
              [36m>[39m
                [0mLessons[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-semibold"[39m
              [36m>[39m
                [0m12[0m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded p-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-sm text-gray-600"[39m
              [36m>[39m
                [0mAssignments[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-semibold"[39m
              [36m>[39m
                [0m7[0m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded p-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-sm text-gray-600"[39m
              [36m>[39m
                [0mSubmissions[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-semibold"[39m
              [36m>[39m
                [0m19[0m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded p-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-sm text-gray-600"[39m
              [36m>[39m
                [0mDAU (latest)[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-semibold"[39m
              [36m>[39m
                [0m24[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded p-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-sm text-gray-600 mb-2"[39m
              [36m>[39m
                [0mRecent Activity[0m
              [36m</div>[39m
              [36m<ul[39m
                [33mclass[39m=[32m"space-y-1 text-sm"[39m
              [36m>[39m
                [36m<li[39m
                  [33mclass[39m=[32m"flex justify-between"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mlesson.complete[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-500"[39m
                  [36m>[39m
                    [0m8/20/2025, 12:16:49 PM[0m
                  [36m</span>[39m
                [36m</li>[39m
                [36m<li[39m
                  [33mclass[39m=[32m"flex justify-between"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0massignment.submit[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-500"[39m
                  [36m>[39m
                    [0m8/20/2025, 12:15:49 PM[0m
                  [36m</span>[39m
                [36m</li>[39m
              [36m</ul>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded p-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-sm text-gray-600 mb-2"[39m
              [36m>[39m
                [0mGrade Distribution[0m
              [36m</div>[39m
              [36m<ul[39m
                [33mclass[39m=[32m"space-y-1 text-sm"[39m
              [36m>[39m
                [36m<li[39m
                  [33mclass[39m=[32m"flex justify-between"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0m90-100[0m
                  [36m</span>[39m
                  [36m<span>[39m
                    [0m10[0m
                  [36m</span>[39m
                [36m</li>[39m
                [36m<li[39m
                  [33mclass[39m=[32m"flex justify-between"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0m80-89[0m
                  [36m</span>[39m
                  [36m<span>[39m
                    [0m15[0m
                  [36m</span>[39m
                [36m</li>[39m
                [36m<li[39m
                  [33mclass[39m=[32m"flex justify-between"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0m70-79[0m
                  [36m</span>[39m
                  [36m<span>[39m
                    [0m9[0m
                  [36m</span>[39m
                [36m</li>[39m
                [36m<li[39m
                  [33mclass[39m=[32m"flex justify-between"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0m0-69[0m
                  [36m</span>[39m
                  [36m<span>[39m
                    [0m8[0m
                  [36m</span>[39m
                [36m</li>[39m
              [36m</ul>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</section>[39m
      [36m</div>[39m
    [36m</body>[39m

      18 |     const ui = await AdminReportsPage();
      19 |     render(ui);
    > 20 |     await screen.findByText('Reports');
         |                  ^
      21 |   });
      22 | });
      23 |

      at waitForWrapper (../node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at ../node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.<anonymous> (unit/ui/AdminReports.spec.tsx:20:18)

FAIL tests/unit/ui/SystemRoleBadge.spec.tsx
  ‚óè System Role Badge (labs) ‚Ä∫ renders role and test mode

    ReferenceError: fetch is not defined

      72 |   }
      73 |   const started = Date.now();
    > 74 |   const res = await fetch(url, { cache: "no-store", ...init, headers: hdrs });
         |               ^
      75 |   try {
      76 |     const ms = Date.now() - started;
      77 |     // eslint-disable-next-line no-console

      at serverFetch (../apps/web/src/lib/serverFetch.ts:74:15)
      at fetchJson (../apps/web/src/lib/serverFetch.ts:88:21)
      at Object.get (../apps/web/src/lib/data/health.ts:14:23)
      at SystemRoleBadgePage (../apps/web/src/app/labs/system/role-badge/page.tsx:10:44)
      at Object.<anonymous> (unit/ui/SystemRoleBadge.spec.tsx:15:41)

FAIL tests/unit/ui/SystemAuthCheck.spec.tsx
  ‚óè System Auth Check (labs) ‚Ä∫ renders email and role when authenticated

    Unable to find an element by: [data-testid="auth-email"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<main[39m
          [33mclass[39m=[32m"p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded p-4 inline-block"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-lg font-medium mb-2"[39m
            [36m>[39m
              [0mAuth check (read-only)[0m
            [36m</div>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mb-2"[39m
            [36m>[39m
              [0mYou are not signed in[0m
            [36m</p>[39m
            [36m<a[39m
              [33mclass[39m=[32m"text-blue-600 underline"[39m
              [33mhref[39m=[32m"/login"[39m
            [36m>[39m
              [0mSign in[0m
            [36m</a>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</body>[39m

      15 |     const ui = await AuthCheckPage();
      16 |     render(ui);
    > 17 |     expect(await screen.findByTestId('auth-email')).toHaveTextContent('t@example.com');
         |                         ^
      18 |     expect(await screen.findByTestId('auth-role')).toHaveTextContent('teacher');
      19 |   });
      20 | });

      at waitForWrapper (../node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at ../node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.<anonymous> (unit/ui/SystemAuthCheck.spec.tsx:17:25)

FAIL tests/unit/ui/ParentChildrenReport.spec.tsx
  ‚óè Parent Children Report (labs) ‚Ä∫ renders total and items

    expect(element).toHaveTextContent()

    Expected element to have text content:
      1
    Received:
      0

      17 |     const ui = await ParentChildrenReportPage();
      18 |     render(ui);
    > 19 |     expect(await screen.findByTestId('children-total')).toHaveTextContent('1');
         |                                                         ^
      20 |   });
      21 | });
      22 |

      at Object.<anonymous> (unit/ui/ParentChildrenReport.spec.tsx:19:57)

FAIL tests/unit/ui/SystemOkCard.spec.tsx
  ‚óè System OK Card (labs) ‚Ä∫ renders ok and ts (human) on success

    expect(element).toHaveTextContent()

    Expected element to have text content:
      true
    Received:
      false

      16 |     const ui = await SystemOkCardPage();
      17 |     render(ui);
    > 18 |     expect(await screen.findByTestId('ok-value')).toHaveTextContent('true');
         |                                                   ^
      19 |     await screen.findByTestId('ts-human');
      20 |   });
      21 | });

      at Object.<anonymous> (unit/ui/SystemOkCard.spec.tsx:18:51)

FAIL tests/unit/ui/SystemRequestId.spec.tsx
  ‚óè System Request ID (labs) ‚Ä∫ renders request-id from response headers when present

    expect(element).toHaveTextContent()

    Expected element to have text content:
      req-123
    Received:
      generated-1755692214471

      17 |     const ui = await RequestIdPage();
      18 |     render(ui);
    > 19 |     expect(await screen.findByTestId('request-id')).toHaveTextContent('req-123');
         |                                                     ^
      20 |   });
      21 | });
      22 |

      at Object.<anonymous> (unit/ui/SystemRequestId.spec.tsx:19:53)

PASS tests/unit/ui/TeacherCourseCardsWithCounts.spec.tsx
PASS tests/unit/ui/TeacherPrintPages.spec.tsx
PASS tests/unit/ui/NotificationsInboxPage.spec.tsx
PASS tests/unit/ui/DropdownMenu.spec.tsx
FAIL tests/unit/ui/ParentChildren.spec.tsx
  ‚óè Console

    console.error
      Warning: Invalid value for prop `action` on <form> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior 
          at form
          at main

      14 |     server.use(http.get('/api/parent-links', () => HttpResponse.json([{ id: 'pl-1', parent_id: 'p-1', student_id: 's-1', created_at: new Date().toISOString() }])));
      15 |     const ui = await ParentChildrenListPage();
    > 16 |     render(ui);
         |           ^
      17 |     await screen.findByTestId('children-list');
      18 |   });
      19 | });

      at printWarning (../node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (../node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnUnknownProperties (../node_modules/react-dom/cjs/react-dom.development.js:3815:7)
      at validateProperties$2 (../node_modules/react-dom/cjs/react-dom.development.js:3827:3)
      at validatePropertiesInDevelopment (../node_modules/react-dom/cjs/react-dom.development.js:9541:5)
      at setInitialProperties (../node_modules/react-dom/cjs/react-dom.development.js:9830:5)
      at finalizeInitialChildren (../node_modules/react-dom/cjs/react-dom.development.js:10950:3)
      at completeWork (../node_modules/react-dom/cjs/react-dom.development.js:22232:17)
      at completeUnitOfWork (../node_modules/react-dom/cjs/react-dom.development.js:26632:16)
      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom.development.js:26607:5)
      at workLoopSync (../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at performConcurrentWorkOnRoot (../node_modules/react-dom/cjs/react-dom.development.js:25777:74)
      at flushActQueue (../node_modules/react/cjs/react.development.js:2667:24)
      at act (../node_modules/react/cjs/react.development.js:2582:11)
      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (unit/ui/ParentChildren.spec.tsx:16:11)

  ‚óè Parent Children (labs) ‚Ä∫ renders list with one linked student

    Unable to find an element by: [data-testid="children-list"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<main[39m
          [33mclass[39m=[32m"p-6"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-xl font-semibold mb-4"[39m
          [36m>[39m
            [0mChildren[0m
          [36m</h1>[39m
          [36m<form[39m
            [33mclass[39m=[32m"mb-3 flex items-center gap-2"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"border rounded p-2"[39m
              [33mname[39m=[32m"student_id"[39m
              [33mplaceholder[39m=[32m"Student ID"[39m
            [36m/>[39m
            [36m<button[39m
              [33mclass[39m=[32m"bg-black text-white rounded px-3 py-1"[39m
            [36m>[39m
              [0mLink[0m
            [36m</button>[39m
          [36m</form>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-gray-600"[39m
          [36m>[39m
            [0mNo linked students.[0m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</body>[39m

      15 |     const ui = await ParentChildrenListPage();
      16 |     render(ui);
    > 17 |     await screen.findByTestId('children-list');
         |                  ^
      18 |   });
      19 | });
      20 |

      at waitForWrapper (../node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at ../node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.<anonymous> (unit/ui/ParentChildren.spec.tsx:17:18)

PASS tests/unit/ui/TeacherAnalyticsLab.spec.tsx
PASS tests/unit/ui/DarkModeToggle.spec.tsx
PASS tests/unit/ui/telemetry.spec.tsx
PASS tests/unit/ui/SettingsPage.spec.tsx
PASS tests/unit/ui/TeacherCoursesGrid.spec.tsx
PASS tests/unit/ui/StudentEnrollmentsGrid.spec.tsx
PASS tests/unit/ui/SystemHealth.spec.tsx

Summary of all failing tests
FAIL unit/ui/NotificationsDropdownClient.spec.tsx
  ‚óè Load more appends items

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 20

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"notif-list"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between mb-2"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"font-medium"[39m
              [36m>[39m
                [0mNotifications[0m
              [36m</span>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Mark all notifications as read"[39m
                [33mclass[39m=[32m"underline text-xs"[39m
                [33mdata-testid[39m=[32m"notif-mark-all"[39m
                [33mtitle[39m=[32m"Mark all read"[39m
              [36m>[39m
                [0mMark all[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<ul[39m
              [33mclass[39m=[32m"space-y-2"[39m
            [36m>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m""[39m
                [36m>[39m
                  [36m<span>[39m
                    [0msubmission:graded[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"ml-2"[39m
                  [36m>[39m
                    [0mScore: [0m
                    [0m80[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Mark notification no-0000 as read"[39m
                  [33mclass[39m=[32m"underline text-xs"[39m
                  [33mdata-testid[39m=[32m"notif-read-btn"[39m
                [36m>[39m
                  [0mRead[0m
                [36m</button>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mmessage:new[0m
                  [36m</span>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"ml-2 underline"[39m
                    [33mhref[39m=[32m"/labs/system/inbox?thread=th-1"[39m
                  [36m>[39m
                    [0mOpen thread[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mannouncement:published[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0msubmission:graded[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"ml-2"[39m
                  [36m>[39m
                    [0mScore: [0m
                    [0m83[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mmessage:new[0m
                  [36m</span>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"ml-2 underline"[39m
                    [33mhref[39m=[32m"/labs/system/inbox?thread=th-4"[39m
                  [36m>[39m
                    [0mOpen thread[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m""[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mannouncement:published[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Mark notification no-0005 as read"[39m
                  [33mclass[39m=[32m"underline text-xs"[39m
                  [33mdata-testid[39m=[32m"notif-read-btn"[39m
                [36m>[39m
                  [0mRead[0m
                [36m</button>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0msubmission:graded[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"ml-2"[39m
                  [36m>[39m
                    [0mScore: [0m
                    [0m86[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mmessage:new[0m
                  [36m</span>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"ml-2 underline"[39m
                    [33mhref[39m=[32m"/labs/system/inbox?thread=th-7"[39m
                  [36m>[39m
                    [0mOpen thread[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mannouncement:published[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0msubmission:graded[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"ml-2"[39m
                  [36m>[39m
                    [0mScore: [0m
                    [0m89[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m""[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mmessage:new[0m
                  [36m</span>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"ml-2 underline"[39m
                    [33mhref[39m=[32m"/labs/system/inbox?thread=th-10"[39m
                  [36m>[39m
                    [0mOpen thread[0m
                  [36m</a>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Mark notification no-0010 as read"[39m
                  [33mclass[39m=[32m"underline text-xs"[39m
                  [33mdata-testid[39m=[32m"notif-read-btn"[39m
                [36m>[39m
                  [0mRead[0m
                [36m</button>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mannouncement:published[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0msubmission:graded[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"ml-2"[39m
                  [36m>[39m
                    [0mScore: [0m
                    [0m92[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mmessage:new[0m
                  [36m</span>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"ml-2 underline"[39m
                    [33mhref[39m=[32m"/labs/system/inbox?thread=th-13"[39m
                  [36m>[39m
                    [0mOpen thread[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mannouncement:published[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m""[39m
                [36m>[39m
                  [36m<span>[39m
                    [0msubmission:graded[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"ml-2"[39m
                  [36m>[39m
                    [0mScore: [0m
                    [0m95[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Mark notification no-0015 as read"[39m
                  [33mclass[39m=[32m"underline text-xs"[39m
                  [33mdata-testid[39m=[32m"notif-read-btn"[39m
                [36m>[39m
                  [0mRead[0m
                [36m</button>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mmessage:new[0m
                  [36m</span>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"ml-2 underline"[39m
                    [33mhref[39m=[32m"/labs/system/inbox?thread=th-16"[39m
                  [36m>[39m
                    [0mOpen thread[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mannouncement:published[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0msubmission:graded[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"ml-2"[39m
                  [36m>[39m
                    [0mScore: [0m
                    [0m98[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
                [33mdata-testid[39m=[32m"notif-item"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-gray-500"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mmessage:new[0m
                  [36m</span>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"ml-2 underline"[39m
                    [33mhref[39m=[32m"/labs/system/inbox?thread=th-19"[39m
                  [36m>[39m
                    [0mOpen thread[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</li>[39m
            [36m</ul>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 flex justify-end"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"underline text-xs"[39m
                [33mdata-testid[39m=[32m"notif-load-more"[39m
              [36m>[39m
                [0mLoad more[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

      55 |   render(<NotificationsDropdownClient initial={[]} />);
      56 |   await user.click(screen.getByTestId('notif-load-more'));
    > 57 |   await waitFor(() => expect(screen.getAllByTestId('notif-item').length).toBe(2));
         |                                                                          ^
      58 |   restore();
      59 | });
      60 |

      at unit/ui/NotificationsDropdownClient.spec.tsx:57:74
      at runWithExpensiveErrorDiagnosticsDisabled (../node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (../node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (../node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (../node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

FAIL unit/ui/TeacherCourseInsightsAdvanced.spec.tsx
  ‚óè Teacher Course Insights (Advanced) ‚Ä∫ renders table and totals with jitter

    Unable to find an element by: [data-testid="insights-table"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<main[39m
          [33mclass[39m=[32m"p-6"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-xl font-semibold mb-4"[39m
          [36m>[39m
            [0mCourse Insights (Advanced)[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-500"[39m
          [36m>[39m
            [0mNo courses yet.[0m
          [36m</p>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</body>[39m

      27 |     const ui = await TeacherCourseInsightsAdvancedPage();
      28 |     render(ui);
    > 29 |     await screen.findByTestId('insights-table');
         |                  ^
      30 |     await screen.findByTestId('insights-total-courses');
      31 |     await screen.findByTestId('insights-total-lessons');
      32 |   });

      at waitForWrapper (../node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at ../node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.<anonymous> (unit/ui/TeacherCourseInsightsAdvanced.spec.tsx:29:18)

FAIL unit/ui/SystemHealthHistory.spec.tsx
  ‚óè System Health History (labs) ‚Ä∫ renders delta stats and timestamps with jitter

    ReferenceError: fetch is not defined

      72 |   }
      73 |   const started = Date.now();
    > 74 |   const res = await fetch(url, { cache: "no-store", ...init, headers: hdrs });
         |               ^
      75 |   try {
      76 |     const ms = Date.now() - started;
      77 |     // eslint-disable-next-line no-console

      at serverFetch (../apps/web/src/lib/serverFetch.ts:74:15)
      at fetchJson (../apps/web/src/lib/serverFetch.ts:88:21)
      at Object.get (../apps/web/src/lib/data/health.ts:14:23)
      at takeSamples (../apps/web/src/app/labs/system/health-history/page.tsx:11:47)
      at HealthHistoryPage (../apps/web/src/app/labs/system/health-history/page.tsx:34:25)
      at Object.<anonymous> (unit/ui/SystemHealthHistory.spec.tsx:15:39)

FAIL unit/ui/SystemUptimeTile.spec.tsx
  ‚óè System Uptime Tile (labs) ‚Ä∫ renders ok and ts fields under jitter

    Unable to find an element by: [data-testid="uptime-ok"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<main[39m
          [33mclass[39m=[32m"p-6"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-xl font-semibold"[39m
          [36m>[39m
            [0mSystem uptime[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-700"[39m
          [36m>[39m
            [0mUnable to load uptime.[0m
          [36m</p>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</body>[39m

      16 |     const ui = await UptimeTilePage();
      17 |     render(ui);
    > 18 |     await screen.findByTestId('uptime-ok');
         |                  ^
      19 |     await screen.findByTestId('uptime-ts-iso');
      20 |     await screen.findByTestId('uptime-ts-human');
      21 |   });

      at waitForWrapper (../node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at ../node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.<anonymous> (unit/ui/SystemUptimeTile.spec.tsx:18:18)

FAIL unit/ui/StudentProfile.spec.tsx
  ‚óè Student Profile (labs) ‚Ä∫ renders email and role when authenticated

    Unable to find an element by: [data-testid="profile-email"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<main[39m
          [33mclass[39m=[32m"p-6 space-y-3"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-xl font-semibold"[39m
            [33mdata-testid[39m=[32m"profile-title"[39m
          [36m>[39m
            [0mStudent Profile[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-700"[39m
            [33mdata-testid[39m=[32m"signin-prompt"[39m
          [36m>[39m
            [0mYou are not signed in[0m
          [36m</p>[39m
          [36m<a[39m
            [33mclass[39m=[32m"underline"[39m
            [33mdata-testid[39m=[32m"signin-link"[39m
            [33mhref[39m=[32m"/login"[39m
          [36m>[39m
            [0mGo to login[0m
          [36m</a>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</body>[39m

      15 |     const ui = await StudentProfilePage();
      16 |     render(ui);
    > 17 |     expect(await screen.findByTestId('profile-email')).toHaveTextContent('s@example.com');
         |                         ^
      18 |     expect(await screen.findByTestId('profile-role')).toHaveTextContent('student');
      19 |   });
      20 | });

      at waitForWrapper (../node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at ../node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.<anonymous> (unit/ui/StudentProfile.spec.tsx:17:25)

FAIL unit/ui/AdminReports.spec.tsx
  ‚óè Admin Reports (dashboard) ‚Ä∫ renders reports tiles

    Found multiple elements with the text: Reports

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33maria-current[39m=[32m"page"[39m
      [33mclass[39m=[32m"text-gray-900"[39m
    [36m>[39m
      [0mReports[0m
    [36m</span>[39m

    Ignored nodes: comments, script, style
    [36m<h1[39m
      [33mclass[39m=[32m"text-xl font-semibold"[39m
    [36m>[39m
      [0mReports[0m
    [36m</h1>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33maria-label[39m=[32m"Reports"[39m
          [33mclass[39m=[32m"p-6 space-y-4"[39m
        [36m>[39m
          [36m<nav[39m
            [33maria-label[39m=[32m"Breadcrumb"[39m
            [33mclass[39m=[32m"text-sm"[39m
          [36m>[39m
            [36m<ol[39m
              [33mclass[39m=[32m"flex items-center gap-1 text-gray-600"[39m
            [36m>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center gap-1"[39m
              [36m>[39m
                [36m<a[39m
                  [33mclass[39m=[32m"underline"[39m
                  [33mhref[39m=[32m"/dashboard/admin"[39m
                [36m>[39m
                  [0mDashboard[0m
                [36m</a>[39m
                [36m<span[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"mx-1"[39m
                [36m>[39m
                  [0m/[0m
                [36m</span>[39m
              [36m</li>[39m
              [36m<li[39m
                [33mclass[39m=[32m"flex items-center gap-1"[39m
              [36m>[39m
                [36m<span[39m
                  [33maria-current[39m=[32m"page"[39m
                  [33mclass[39m=[32m"text-gray-900"[39m
                [36m>[39m
                  [0mReports[0m
                [36m</span>[39m
              [36m</li>[39m
            [36m</ol>[39m
          [36m</nav>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-xl font-semibold"[39m
          [36m>[39m
            [0mReports[0m
          [36m</h1>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 sm:grid-cols-4 gap-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded p-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-sm text-gray-600"[39m
              [36m>[39m
                [0mLessons[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-semibold"[39m
              [36m>[39m
                [0m12[0m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded p-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-sm text-gray-600"[39m
              [36m>[39m
                [0mAssignments[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-semibold"[39m
              [36m>[39m
                [0m7[0m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded p-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-sm text-gray-600"[39m
              [36m>[39m
                [0mSubmissions[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-semibold"[39m
              [36m>[39m
                [0m19[0m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded p-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-sm text-gray-600"[39m
              [36m>[39m
                [0mDAU (latest)[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-semibold"[39m
              [36m>[39m
                [0m24[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded p-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-sm text-gray-600 mb-2"[39m
              [36m>[39m
                [0mRecent Activity[0m
              [36m</div>[39m
              [36m<ul[39m
                [33mclass[39m=[32m"space-y-1 text-sm"[39m
              [36m>[39m
                [36m<li[39m
                  [33mclass[39m=[32m"flex justify-between"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mlesson.complete[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-500"[39m
                  [36m>[39m
                    [0m8/20/2025, 12:16:49 PM[0m
                  [36m</span>[39m
                [36m</li>[39m
                [36m<li[39m
                  [33mclass[39m=[32m"flex justify-between"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0massignment.submit[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-500"[39m
                  [36m>[39m
                    [0m8/20/2025, 12:15:49 PM[0m
                  [36m</span>[39m
                [36m</li>[39m
              [36m</ul>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded p-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-sm text-gray-600 mb-2"[39m
              [36m>[39m
                [0mGrade Distribution[0m
              [36m</div>[39m
              [36m<ul[39m
                [33mclass[39m=[32m"space-y-1 text-sm"[39m
              [36m>[39m
                [36m<li[39m
                  [33mclass[39m=[32m"flex justify-between"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0m90-100[0m
                  [36m</span>[39m
                  [36m<span>[39m
                    [0m10[0m
                  [36m</span>[39m
                [36m</li>[39m
                [36m<li[39m
                  [33mclass[39m=[32m"flex justify-between"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0m80-89[0m
                  [36m</span>[39m
                  [36m<span>[39m
                    [0m15[0m
                  [36m</span>[39m
                [36m</li>[39m
                [36m<li[39m
                  [33mclass[39m=[32m"flex justify-between"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0m70-79[0m
                  [36m</span>[39m
                  [36m<span>[39m
                    [0m9[0m
                  [36m</span>[39m
                [36m</li>[39m
                [36m<li[39m
                  [33mclass[39m=[32m"flex justify-between"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0m0-69[0m
                  [36m</span>[39m
                  [36m<span>[39m
                    [0m8[0m
                  [36m</span>[39m
                [36m</li>[39m
              [36m</ul>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</section>[39m
      [36m</div>[39m
    [36m</body>[39m

      18 |     const ui = await AdminReportsPage();
      19 |     render(ui);
    > 20 |     await screen.findByText('Reports');
         |                  ^
      21 |   });
      22 | });
      23 |

      at waitForWrapper (../node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at ../node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.<anonymous> (unit/ui/AdminReports.spec.tsx:20:18)

FAIL unit/ui/SystemRoleBadge.spec.tsx
  ‚óè System Role Badge (labs) ‚Ä∫ renders role and test mode

    ReferenceError: fetch is not defined

      72 |   }
      73 |   const started = Date.now();
    > 74 |   const res = await fetch(url, { cache: "no-store", ...init, headers: hdrs });
         |               ^
      75 |   try {
      76 |     const ms = Date.now() - started;
      77 |     // eslint-disable-next-line no-console

      at serverFetch (../apps/web/src/lib/serverFetch.ts:74:15)
      at fetchJson (../apps/web/src/lib/serverFetch.ts:88:21)
      at Object.get (../apps/web/src/lib/data/health.ts:14:23)
      at SystemRoleBadgePage (../apps/web/src/app/labs/system/role-badge/page.tsx:10:44)
      at Object.<anonymous> (unit/ui/SystemRoleBadge.spec.tsx:15:41)

FAIL unit/ui/SystemAuthCheck.spec.tsx
  ‚óè System Auth Check (labs) ‚Ä∫ renders email and role when authenticated

    Unable to find an element by: [data-testid="auth-email"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<main[39m
          [33mclass[39m=[32m"p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded p-4 inline-block"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-lg font-medium mb-2"[39m
            [36m>[39m
              [0mAuth check (read-only)[0m
            [36m</div>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mb-2"[39m
            [36m>[39m
              [0mYou are not signed in[0m
            [36m</p>[39m
            [36m<a[39m
              [33mclass[39m=[32m"text-blue-600 underline"[39m
              [33mhref[39m=[32m"/login"[39m
            [36m>[39m
              [0mSign in[0m
            [36m</a>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</body>[39m

      15 |     const ui = await AuthCheckPage();
      16 |     render(ui);
    > 17 |     expect(await screen.findByTestId('auth-email')).toHaveTextContent('t@example.com');
         |                         ^
      18 |     expect(await screen.findByTestId('auth-role')).toHaveTextContent('teacher');
      19 |   });
      20 | });

      at waitForWrapper (../node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at ../node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.<anonymous> (unit/ui/SystemAuthCheck.spec.tsx:17:25)

FAIL unit/ui/ParentChildrenReport.spec.tsx
  ‚óè Parent Children Report (labs) ‚Ä∫ renders total and items

    expect(element).toHaveTextContent()

    Expected element to have text content:
      1
    Received:
      0

      17 |     const ui = await ParentChildrenReportPage();
      18 |     render(ui);
    > 19 |     expect(await screen.findByTestId('children-total')).toHaveTextContent('1');
         |                                                         ^
      20 |   });
      21 | });
      22 |

      at Object.<anonymous> (unit/ui/ParentChildrenReport.spec.tsx:19:57)

FAIL unit/ui/SystemOkCard.spec.tsx
  ‚óè System OK Card (labs) ‚Ä∫ renders ok and ts (human) on success

    expect(element).toHaveTextContent()

    Expected element to have text content:
      true
    Received:
      false

      16 |     const ui = await SystemOkCardPage();
      17 |     render(ui);
    > 18 |     expect(await screen.findByTestId('ok-value')).toHaveTextContent('true');
         |                                                   ^
      19 |     await screen.findByTestId('ts-human');
      20 |   });
      21 | });

      at Object.<anonymous> (unit/ui/SystemOkCard.spec.tsx:18:51)

FAIL unit/ui/SystemRequestId.spec.tsx
  ‚óè System Request ID (labs) ‚Ä∫ renders request-id from response headers when present

    expect(element).toHaveTextContent()

    Expected element to have text content:
      req-123
    Received:
      generated-1755692214471

      17 |     const ui = await RequestIdPage();
      18 |     render(ui);
    > 19 |     expect(await screen.findByTestId('request-id')).toHaveTextContent('req-123');
         |                                                     ^
      20 |   });
      21 | });
      22 |

      at Object.<anonymous> (unit/ui/SystemRequestId.spec.tsx:19:53)

FAIL unit/ui/ParentChildren.spec.tsx
  ‚óè Parent Children (labs) ‚Ä∫ renders list with one linked student

    Unable to find an element by: [data-testid="children-list"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<main[39m
          [33mclass[39m=[32m"p-6"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-xl font-semibold mb-4"[39m
          [36m>[39m
            [0mChildren[0m
          [36m</h1>[39m
          [36m<form[39m
            [33mclass[39m=[32m"mb-3 flex items-center gap-2"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"border rounded p-2"[39m
              [33mname[39m=[32m"student_id"[39m
              [33mplaceholder[39m=[32m"Student ID"[39m
            [36m/>[39m
            [36m<button[39m
              [33mclass[39m=[32m"bg-black text-white rounded px-3 py-1"[39m
            [36m>[39m
              [0mLink[0m
            [36m</button>[39m
          [36m</form>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-gray-600"[39m
          [36m>[39m
            [0mNo linked students.[0m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</body>[39m

      15 |     const ui = await ParentChildrenListPage();
      16 |     render(ui);
    > 17 |     await screen.findByTestId('children-list');
         |                  ^
      18 |   });
      19 | });
      20 |

      at waitForWrapper (../node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at ../node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.<anonymous> (unit/ui/ParentChildren.spec.tsx:17:18)


Test Suites: 12 failed, 26 passed, 38 total
Tests:       12 failed, 27 passed, 39 total
Snapshots:   0 total
Time:        24.209 s
Ran all test suites.
