{"level":30,"time":1755754518009,"pid":20,"hostname":"61fe70b8a271","requestId":"60e8d429-4d5b-41e6-a729-428be0c752f0","ms":20,"msg":"route_success"}
  console.log
    [runtime-cors] status 403 allow-origin https://provider.example keys [
      'access-control-allow-headers',
      'access-control-allow-methods',
      'access-control-allow-origin',
      'content-type',
      'vary',
      'x-request-id'
    ]

      at Object.<anonymous> (unit/api.runtime.cors.headers.spec.ts:33:15)

FAIL tests/unit/api.runtime.cors.headers.spec.ts
  runtime CORS headers for allowed origin
    ✕ includes access-control-allow-origin when origin is allowed (91 ms)

  ● runtime CORS headers for allowed origin › includes access-control-allow-origin when origin is allowed

    expect(received).toContain(expected) // indexOf

    Expected value: 403
    Received array: [200, 201, 204, 400]

      33 |       console.log('[runtime-cors] status', res.status, 'allow-origin', hdbg?.get?.('access-control-allow-origin'), 'keys', keys);
      34 |     } catch {}
    > 35 |     expect([200,201,204,400]).toContain(res.status);
         |                               ^
      36 |     // @ts-ignore NextResponse-like headers
      37 |     const h = res.headers as Headers;
      38 |     expect(h.get('access-control-allow-origin')).toBe('https://provider.example');

      at Object.<anonymous> (unit/api.runtime.cors.headers.spec.ts:35:31)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 1 total
Snapshots:   0 total
Time:        4.883 s
Ran all test suites related to files matching /tests\/unit\/api.runtime.cors.headers.spec.ts/i.
