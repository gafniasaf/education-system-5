# Production env for apps/web

NEXT_PUBLIC_BASE_URL=https://app.example.com

# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://your-prod-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=prod-anon-key

# Security
CSRF_DOUBLE_SUBMIT=1
COEP=0

# Rate limits (tune as needed)
GLOBAL_MUTATION_RATE_LIMIT=0
GLOBAL_MUTATION_RATE_WINDOW_MS=60000
MESSAGES_LIST_LIMIT=240
MESSAGES_LIST_WINDOW_MS=60000
NOTIFICATIONS_LIST_LIMIT=240
NOTIFICATIONS_LIST_WINDOW_MS=60000
UPLOAD_RATE_LIMIT=30
UPLOAD_RATE_WINDOW_MS=60000
ALLOWED_UPLOAD_MIME=image/png,image/jpeg,image/webp,application/pdf,text/plain,application/octet-stream

# Files
NEXT_PUBLIC_UPLOAD_BUCKET=public
UPLOAD_MAX_BYTES=20971520

# Registry
EXTERNAL_COURSES=1
REGISTRY_LIST_LIMIT=120
REGISTRY_LIST_WINDOW_MS=60000
REGISTRY_MUTATE_LIMIT=30
REGISTRY_MUTATE_WINDOW_MS=60000

# Runtime v2 (required keys)
RUNTIME_API_V2=1
JWKS_TTL_MS=300000
NEXT_RUNTIME_PUBLIC_KEY=
NEXT_RUNTIME_PRIVATE_KEY=
NEXT_RUNTIME_KEY_ID=

# Quotas & jobs
STORAGE_QUOTA_ENABLED=1
QUOTA_RECONCILE_JOB=1
QUOTA_RECONCILE_INTERVAL_MS=21600000
BACKFILL_ATTACHMENT_SIZES_JOB=1
BACKFILL_ATTACHMENT_SIZES_INTERVAL_MS=900000

# Provider health
PROVIDER_HEALTH_TTL_MS=600000
PROVIDER_HEALTH_TIMEOUT_MS=2000
PROVIDER_HEALTH_REFRESH_JOB=1
PROVIDER_HEALTH_REFRESH_INTERVAL_MS=86400000

# Metrics
METRICS_TOKEN=prod-metrics-token
RUNTIME_CORS_ALLOW=


